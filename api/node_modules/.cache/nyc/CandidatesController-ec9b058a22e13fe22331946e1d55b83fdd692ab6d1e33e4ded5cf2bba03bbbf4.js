function cov_1xrcu38fnp(){var path="/home/nawander/Documents/AI_Assessment/api/controllers/CandidatesController.js";var hash="4f216da94cddaab57619faa13bf2dce1b79c0b70";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/nawander/Documents/AI_Assessment/api/controllers/CandidatesController.js",statementMap:{"0":{start:{line:1,column:26},end:{line:1,column:65}},"1":{start:{line:2,column:17},end:{line:2,column:46}},"2":{start:{line:4,column:29},end:{line:10,column:1}},"3":{start:{line:5,column:27},end:{line:5,column:35}},"4":{start:{line:6,column:21},end:{line:8,column:41}},"5":{start:{line:9,column:2},end:{line:9,column:35}},"6":{start:{line:13,column:28},end:{line:46,column:1}},"7":{start:{line:14,column:26},end:{line:14,column:34}},"8":{start:{line:15,column:20},end:{line:15,column:73}},"9":{start:{line:16,column:2},end:{line:18,column:3}},"10":{start:{line:17,column:4},end:{line:17,column:66}},"11":{start:{line:19,column:2},end:{line:19,column:17}},"12":{start:{line:20,column:20},end:{line:20,column:22}},"13":{start:{line:21,column:2},end:{line:36,column:3}},"14":{start:{line:21,column:15},end:{line:21,column:16}},"15":{start:{line:22,column:21},end:{line:22,column:43}},"16":{start:{line:24,column:21},end:{line:24,column:73}},"17":{start:{line:26,column:25},end:{line:26,column:129}},"18":{start:{line:26,column:59},end:{line:26,column:121}},"19":{start:{line:27,column:24},end:{line:27,column:82}},"20":{start:{line:27,column:58},end:{line:27,column:74}},"21":{start:{line:28,column:3},end:{line:30,column:3}},"22":{start:{line:29,column:4},end:{line:29,column:33}},"23":{start:{line:31,column:4},end:{line:35,column:7}},"24":{start:{line:37,column:2},end:{line:37,column:36}},"25":{start:{line:38,column:2},end:{line:38,column:25}},"26":{start:{line:39,column:24},end:{line:43,column:3}},"27":{start:{line:44,column:2},end:{line:44,column:38}},"28":{start:{line:49,column:0},end:{line:49,column:62}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:4,column:29},end:{line:4,column:30}},loc:{start:{line:4,column:49},end:{line:10,column:1}},line:4},"1":{name:"(anonymous_1)",decl:{start:{line:13,column:28},end:{line:13,column:29}},loc:{start:{line:13,column:48},end:{line:46,column:1}},line:13},"2":{name:"(anonymous_2)",decl:{start:{line:26,column:47},end:{line:26,column:48}},loc:{start:{line:26,column:59},end:{line:26,column:121}},line:26},"3":{name:"(anonymous_3)",decl:{start:{line:27,column:46},end:{line:27,column:47}},loc:{start:{line:27,column:58},end:{line:27,column:74}},line:27}},branchMap:{"0":{loc:{start:{line:16,column:2},end:{line:18,column:3}},type:"if",locations:[{start:{line:16,column:2},end:{line:18,column:3}},{start:{line:16,column:2},end:{line:18,column:3}}],line:16},"1":{loc:{start:{line:28,column:3},end:{line:30,column:3}},type:"if",locations:[{start:{line:28,column:3},end:{line:30,column:3}},{start:{line:28,column:3},end:{line:30,column:3}}],line:28}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0},f:{"0":0,"1":0,"2":0,"3":0},b:{"0":[0,0],"1":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"4f216da94cddaab57619faa13bf2dce1b79c0b70"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1xrcu38fnp=function(){return actualCoverage;};}return actualCoverage;}cov_1xrcu38fnp();const CandidateResponse=(cov_1xrcu38fnp().s[0]++,require("../models/CandidateResponses"));const Question=(cov_1xrcu38fnp().s[1]++,require("../models/Question"));cov_1xrcu38fnp().s[2]++;const GetInvitedCandidates=async(req,res)=>{cov_1xrcu38fnp().f[0]++;const{assessmentId}=(cov_1xrcu38fnp().s[3]++,req.body);const candidates=(cov_1xrcu38fnp().s[4]++,await CandidateResponse.find({assessmentId:assessmentId}).select({email:1,isAttempted:1}));cov_1xrcu38fnp().s[5]++;res.status(200).json(candidates);};cov_1xrcu38fnp().s[6]++;const getCandidatesReport=async(req,res)=>{cov_1xrcu38fnp().f[1]++;const{candidateId}=(cov_1xrcu38fnp().s[7]++,req.body);const candidate=(cov_1xrcu38fnp().s[8]++,await CandidateResponse.findOne({_id:candidateId}));cov_1xrcu38fnp().s[9]++;if(!candidate){cov_1xrcu38fnp().b[0][0]++;cov_1xrcu38fnp().s[10]++;return res.status(404).json({error:"Candidate not found"});}else{cov_1xrcu38fnp().b[0][1]++;}cov_1xrcu38fnp().s[11]++;totalScore=0;const responses=(cov_1xrcu38fnp().s[12]++,[]);cov_1xrcu38fnp().s[13]++;for(let i=(cov_1xrcu38fnp().s[14]++,0);i<candidate.responses.length;i++){const response=(cov_1xrcu38fnp().s[15]++,candidate.responses[i]);//console.log("response", response.optionId);
const question=(cov_1xrcu38fnp().s[16]++,await Question.findOne({_id:response.questionId}));//console.log("question",JSON.stringify(question.options[0]._id));
const optionselected=(cov_1xrcu38fnp().s[17]++,question.options.find(option=>{cov_1xrcu38fnp().f[2]++;cov_1xrcu38fnp().s[18]++;return JSON.stringify(option._id)===JSON.stringify(response.optionId);}).option);const correctoption=(cov_1xrcu38fnp().s[19]++,question.options.find(option=>{cov_1xrcu38fnp().f[3]++;cov_1xrcu38fnp().s[20]++;return option.isCorrect;}).option);cov_1xrcu38fnp().s[21]++;if(optionselected===correctoption){cov_1xrcu38fnp().b[1][0]++;cov_1xrcu38fnp().s[22]++;totalScore+=question.score;}else{cov_1xrcu38fnp().b[1][1]++;}cov_1xrcu38fnp().s[23]++;responses.push({question:question.question,selectedOption:optionselected,correctOption:correctoption});}cov_1xrcu38fnp().s[24]++;candidate.totalScore=totalScore;cov_1xrcu38fnp().s[25]++;await candidate.save();const finalresponse=(cov_1xrcu38fnp().s[26]++,{candidate:candidate.email,responses:responses,totalScore:candidate.totalScore});cov_1xrcu38fnp().s[27]++;res.status(200).json(finalresponse);};cov_1xrcu38fnp().s[28]++;module.exports={GetInvitedCandidates,getCandidatesReport};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMXhyY3UzOGZucCIsImFjdHVhbENvdmVyYWdlIiwiQ2FuZGlkYXRlUmVzcG9uc2UiLCJzIiwicmVxdWlyZSIsIlF1ZXN0aW9uIiwiR2V0SW52aXRlZENhbmRpZGF0ZXMiLCJyZXEiLCJyZXMiLCJmIiwiYXNzZXNzbWVudElkIiwiYm9keSIsImNhbmRpZGF0ZXMiLCJmaW5kIiwic2VsZWN0IiwiZW1haWwiLCJpc0F0dGVtcHRlZCIsInN0YXR1cyIsImpzb24iLCJnZXRDYW5kaWRhdGVzUmVwb3J0IiwiY2FuZGlkYXRlSWQiLCJjYW5kaWRhdGUiLCJmaW5kT25lIiwiX2lkIiwiYiIsImVycm9yIiwidG90YWxTY29yZSIsInJlc3BvbnNlcyIsImkiLCJsZW5ndGgiLCJyZXNwb25zZSIsInF1ZXN0aW9uIiwicXVlc3Rpb25JZCIsIm9wdGlvbnNlbGVjdGVkIiwib3B0aW9ucyIsIm9wdGlvbiIsIkpTT04iLCJzdHJpbmdpZnkiLCJvcHRpb25JZCIsImNvcnJlY3RvcHRpb24iLCJpc0NvcnJlY3QiLCJzY29yZSIsInB1c2giLCJzZWxlY3RlZE9wdGlvbiIsImNvcnJlY3RPcHRpb24iLCJzYXZlIiwiZmluYWxyZXNwb25zZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJDYW5kaWRhdGVzQ29udHJvbGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBDYW5kaWRhdGVSZXNwb25zZSA9IHJlcXVpcmUoXCIuLi9tb2RlbHMvQ2FuZGlkYXRlUmVzcG9uc2VzXCIpO1xuY29uc3QgUXVlc3Rpb24gPSByZXF1aXJlKFwiLi4vbW9kZWxzL1F1ZXN0aW9uXCIpO1xuXG5jb25zdCBHZXRJbnZpdGVkQ2FuZGlkYXRlcyA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICBjb25zdCB7IGFzc2Vzc21lbnRJZCB9ID0gcmVxLmJvZHk7XG4gIGNvbnN0IGNhbmRpZGF0ZXMgPSBhd2FpdCBDYW5kaWRhdGVSZXNwb25zZS5maW5kKHtcbiAgICBhc3Nlc3NtZW50SWQ6IGFzc2Vzc21lbnRJZCxcbiAgfSkuc2VsZWN0KHsgZW1haWw6IDEsIGlzQXR0ZW1wdGVkOiAxIH0pO1xuICByZXMuc3RhdHVzKDIwMCkuanNvbihjYW5kaWRhdGVzKTtcbn07XG5cblxuY29uc3QgZ2V0Q2FuZGlkYXRlc1JlcG9ydCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICBjb25zdCB7IGNhbmRpZGF0ZUlkIH0gPSByZXEuYm9keTtcbiAgY29uc3QgY2FuZGlkYXRlID0gYXdhaXQgQ2FuZGlkYXRlUmVzcG9uc2UuZmluZE9uZSh7IF9pZDogY2FuZGlkYXRlSWQgfSk7XG4gIGlmICghY2FuZGlkYXRlKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6IFwiQ2FuZGlkYXRlIG5vdCBmb3VuZFwiIH0pO1xuICB9XG4gIHRvdGFsU2NvcmUgPSAwO1xuICBjb25zdCByZXNwb25zZXMgPSBbXTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBjYW5kaWRhdGUucmVzcG9uc2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBjYW5kaWRhdGUucmVzcG9uc2VzW2ldO1xuICAgIC8vY29uc29sZS5sb2coXCJyZXNwb25zZVwiLCByZXNwb25zZS5vcHRpb25JZCk7XG4gICAgY29uc3QgcXVlc3Rpb24gPSBhd2FpdCBRdWVzdGlvbi5maW5kT25lKHsgX2lkOiByZXNwb25zZS5xdWVzdGlvbklkIH0pO1xuICAgLy9jb25zb2xlLmxvZyhcInF1ZXN0aW9uXCIsSlNPTi5zdHJpbmdpZnkocXVlc3Rpb24ub3B0aW9uc1swXS5faWQpKTtcbiAgIGNvbnN0IG9wdGlvbnNlbGVjdGVkPSBxdWVzdGlvbi5vcHRpb25zLmZpbmQoKG9wdGlvbikgPT4gSlNPTi5zdHJpbmdpZnkob3B0aW9uLl9pZCk9PT1KU09OLnN0cmluZ2lmeShyZXNwb25zZS5vcHRpb25JZCkpLm9wdGlvblxuICAgY29uc3QgY29ycmVjdG9wdGlvbj0gcXVlc3Rpb24ub3B0aW9ucy5maW5kKChvcHRpb24pID0+IG9wdGlvbi5pc0NvcnJlY3QpLm9wdGlvbiBcbiAgIGlmIChvcHRpb25zZWxlY3RlZCA9PT0gY29ycmVjdG9wdGlvbikge1xuICAgIHRvdGFsU2NvcmUgKz0gcXVlc3Rpb24uc2NvcmU7XG4gIH1cbiAgICByZXNwb25zZXMucHVzaCh7XG4gICAgICBxdWVzdGlvbjogcXVlc3Rpb24ucXVlc3Rpb24sXG4gICAgICBzZWxlY3RlZE9wdGlvbjogb3B0aW9uc2VsZWN0ZWQsXG4gICAgICBjb3JyZWN0T3B0aW9uOiBjb3JyZWN0b3B0aW9uLFxuICAgIH0pO1xuICB9XG4gIGNhbmRpZGF0ZS50b3RhbFNjb3JlID0gdG90YWxTY29yZTtcbiAgYXdhaXQgY2FuZGlkYXRlLnNhdmUoKTtcbiAgY29uc3QgZmluYWxyZXNwb25zZSA9IHtcbiAgICBjYW5kaWRhdGU6IGNhbmRpZGF0ZS5lbWFpbCxcbiAgICByZXNwb25zZXM6IHJlc3BvbnNlcyxcbiAgICB0b3RhbFNjb3JlOiBjYW5kaWRhdGUudG90YWxTY29yZSxcbiAgfTtcbiAgcmVzLnN0YXR1cygyMDApLmpzb24oZmluYWxyZXNwb25zZSk7XG5cbn1cblxuXG5tb2R1bGUuZXhwb3J0cyA9IHsgR2V0SW52aXRlZENhbmRpZGF0ZXMsIGdldENhbmRpZGF0ZXNSZXBvcnR9O1xuIl0sIm1hcHBpbmdzIjoieTRHQWVZO0FBQUFBLGNBQUEsU0FBQUEsQ0FBQSxTQUFBQyxjQUFBLFdBQUFBLGNBQUEsRUFBQUQsY0FBQSxHQWZaLEtBQU0sQ0FBQUUsaUJBQWlCLEVBQUFGLGNBQUEsR0FBQUcsQ0FBQSxNQUFHQyxPQUFPLENBQUMsOEJBQThCLENBQUMsRUFDakUsS0FBTSxDQUFBQyxRQUFRLEVBQUFMLGNBQUEsR0FBQUcsQ0FBQSxNQUFHQyxPQUFPLENBQUMsb0JBQW9CLENBQUMsRUFBQ0osY0FBQSxHQUFBRyxDQUFBLE1BRS9DLEtBQU0sQ0FBQUcsb0JBQW9CLENBQUcsS0FBQUEsQ0FBT0MsR0FBRyxDQUFFQyxHQUFHLEdBQUssQ0FBQVIsY0FBQSxHQUFBUyxD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