function cov_bq7fa04kd(){var path="/home/nawander/Documents/AI_Assessment/api/controllers/TestController.js";var hash="7c2765ecffd55e7a0393c7c6856bd0bf6988d38a";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/nawander/Documents/AI_Assessment/api/controllers/TestController.js",statementMap:{"0":{start:{line:1,column:26},end:{line:1,column:65}},"1":{start:{line:2,column:19},end:{line:2,column:50}},"2":{start:{line:3,column:17},end:{line:3,column:46}},"3":{start:{line:5,column:19},end:{line:28,column:1}},"4":{start:{line:6,column:4},end:{line:27,column:5}},"5":{start:{line:7,column:57},end:{line:7,column:65}},"6":{start:{line:14,column:32},end:{line:23,column:9}},"7":{start:{line:24,column:8},end:{line:24,column:46}},"8":{start:{line:26,column:8},end:{line:26,column:75}},"9":{start:{line:30,column:25},end:{line:53,column:1}},"10":{start:{line:31,column:4},end:{line:52,column:5}},"11":{start:{line:32,column:40},end:{line:32,column:48}},"12":{start:{line:33,column:27},end:{line:36,column:10}},"13":{start:{line:37,column:8},end:{line:48,column:9}},"14":{start:{line:38,column:12},end:{line:38,column:54}},"15":{start:{line:40,column:34},end:{line:43,column:14}},"16":{start:{line:44,column:30},end:{line:46,column:86}},"17":{start:{line:47,column:12},end:{line:47,column:44}},"18":{start:{line:50,column:8},end:{line:50,column:27}},"19":{start:{line:51,column:8},end:{line:51,column:81}},"20":{start:{line:55,column:0},end:{line:55,column:50}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:5,column:19},end:{line:5,column:20}},loc:{start:{line:5,column:39},end:{line:28,column:1}},line:5},"1":{name:"(anonymous_1)",decl:{start:{line:30,column:25},end:{line:30,column:26}},loc:{start:{line:30,column:45},end:{line:53,column:1}},line:30}},branchMap:{"0":{loc:{start:{line:37,column:8},end:{line:48,column:9}},type:"if",locations:[{start:{line:37,column:8},end:{line:48,column:9}},{start:{line:37,column:8},end:{line:48,column:9}}],line:37}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},f:{"0":0,"1":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"7c2765ecffd55e7a0393c7c6856bd0bf6988d38a"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_bq7fa04kd=function(){return actualCoverage;};}return actualCoverage;}cov_bq7fa04kd();const CandidateResponse=(cov_bq7fa04kd().s[0]++,require('../models/CandidateResponses'));const Assessment=(cov_bq7fa04kd().s[1]++,require('../models/Assessment'));const Question=(cov_bq7fa04kd().s[2]++,require('../models/Question'));cov_bq7fa04kd().s[3]++;const submitTest=async(req,res)=>{cov_bq7fa04kd().f[0]++;cov_bq7fa04kd().s[4]++;try{const{assessmentId,email,selectedOptions}=(cov_bq7fa04kd().s[5]++,req.body);// const createdResponse = await CandidateResponse.create({
//     email,
//     isAttempted: true,
//     assessmentId: assessmentId,
//     responses: selectedOptions,
// });
const createdResponse=(cov_bq7fa04kd().s[6]++,await CandidateResponse.findOneAndUpdate({email:email,assessmentId:assessmentId},{email,isAttempted:true,assessmentId:assessmentId,responses:selectedOptions},{upsert:true,new:true}));cov_bq7fa04kd().s[7]++;res.status(201).json(createdResponse);}catch(error){cov_bq7fa04kd().s[8]++;res.status(500).json({error:'Test didnot submit successfully'});}};cov_bq7fa04kd().s[9]++;const getTestQuestions=async(req,res)=>{cov_bq7fa04kd().f[1]++;cov_bq7fa04kd().s[10]++;try{const{assessmentid,email}=(cov_bq7fa04kd().s[11]++,req.body);const candidates=(cov_bq7fa04kd().s[12]++,await CandidateResponse.findOne({email:email,assessmentId:assessmentid}));cov_bq7fa04kd().s[13]++;if(candidates.isAttempted===true){cov_bq7fa04kd().b[0][0]++;cov_bq7fa04kd().s[14]++;res.status(200).json('already attempted');}else{cov_bq7fa04kd().b[0][1]++;const questions_ids=(cov_bq7fa04kd().s[15]++,await Assessment.findOne({_id:assessmentid,assessmentstatus:'live'}));const questions=(cov_bq7fa04kd().s[16]++,await Question.find({_id:{$in:questions_ids.questions}}).select({question:1,'options.option':1,'options._id':1}).limit(0));cov_bq7fa04kd().s[17]++;res.status(200).json(questions);}}catch(error){cov_bq7fa04kd().s[18]++;console.log(error);cov_bq7fa04kd().s[19]++;res.status(500).json({error:'error in retreving questions for test'});}};cov_bq7fa04kd().s[20]++;module.exports={submitTest,getTestQuestions};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfYnE3ZmEwNGtkIiwiYWN0dWFsQ292ZXJhZ2UiLCJDYW5kaWRhdGVSZXNwb25zZSIsInMiLCJyZXF1aXJlIiwiQXNzZXNzbWVudCIsIlF1ZXN0aW9uIiwic3VibWl0VGVzdCIsInJlcSIsInJlcyIsImYiLCJhc3Nlc3NtZW50SWQiLCJlbWFpbCIsInNlbGVjdGVkT3B0aW9ucyIsImJvZHkiLCJjcmVhdGVkUmVzcG9uc2UiLCJmaW5kT25lQW5kVXBkYXRlIiwiaXNBdHRlbXB0ZWQiLCJyZXNwb25zZXMiLCJ1cHNlcnQiLCJuZXciLCJzdGF0dXMiLCJqc29uIiwiZXJyb3IiLCJnZXRUZXN0UXVlc3Rpb25zIiwiYXNzZXNzbWVudGlkIiwiY2FuZGlkYXRlcyIsImZpbmRPbmUiLCJiIiwicXVlc3Rpb25zX2lkcyIsIl9pZCIsImFzc2Vzc21lbnRzdGF0dXMiLCJxdWVzdGlvbnMiLCJmaW5kIiwiJGluIiwic2VsZWN0IiwicXVlc3Rpb24iLCJsaW1pdCIsImNvbnNvbGUiLCJsb2ciLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiVGVzdENvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgQ2FuZGlkYXRlUmVzcG9uc2UgPSByZXF1aXJlKCcuLi9tb2RlbHMvQ2FuZGlkYXRlUmVzcG9uc2VzJyk7XG5jb25zdCBBc3Nlc3NtZW50ID0gcmVxdWlyZSgnLi4vbW9kZWxzL0Fzc2Vzc21lbnQnKTtcbmNvbnN0IFF1ZXN0aW9uID0gcmVxdWlyZSgnLi4vbW9kZWxzL1F1ZXN0aW9uJyk7XG5cbmNvbnN0IHN1Ym1pdFRlc3QgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB7IGFzc2Vzc21lbnRJZCwgZW1haWwsIHNlbGVjdGVkT3B0aW9ucyB9ID0gcmVxLmJvZHk7XG4gICAgICAgIC8vIGNvbnN0IGNyZWF0ZWRSZXNwb25zZSA9IGF3YWl0IENhbmRpZGF0ZVJlc3BvbnNlLmNyZWF0ZSh7XG4gICAgICAgIC8vICAgICBlbWFpbCxcbiAgICAgICAgLy8gICAgIGlzQXR0ZW1wdGVkOiB0cnVlLFxuICAgICAgICAvLyAgICAgYXNzZXNzbWVudElkOiBhc3Nlc3NtZW50SWQsXG4gICAgICAgIC8vICAgICByZXNwb25zZXM6IHNlbGVjdGVkT3B0aW9ucyxcbiAgICAgICAgLy8gfSk7XG4gICAgICAgIGNvbnN0IGNyZWF0ZWRSZXNwb25zZSA9IGF3YWl0IENhbmRpZGF0ZVJlc3BvbnNlLmZpbmRPbmVBbmRVcGRhdGUoXG4gICAgICAgICAgICB7IGVtYWlsOiBlbWFpbCwgYXNzZXNzbWVudElkOiBhc3Nlc3NtZW50SWQgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBlbWFpbCxcbiAgICAgICAgICAgICAgICBpc0F0dGVtcHRlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBhc3Nlc3NtZW50SWQ6IGFzc2Vzc21lbnRJZCxcbiAgICAgICAgICAgICAgICByZXNwb25zZXM6IHNlbGVjdGVkT3B0aW9ucyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7IHVwc2VydDogdHJ1ZSwgbmV3OiB0cnVlIH1cbiAgICAgICAgKTtcbiAgICAgICAgcmVzLnN0YXR1cygyMDEpLmpzb24oY3JlYXRlZFJlc3BvbnNlKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnVGVzdCBkaWRub3Qgc3VibWl0IHN1Y2Nlc3NmdWxseScgfSk7XG4gICAgfVxufTtcblxuY29uc3QgZ2V0VGVzdFF1ZXN0aW9ucyA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHsgYXNzZXNzbWVudGlkLCBlbWFpbCB9ID0gcmVxLmJvZHk7XG4gICAgICAgIGNvbnN0IGNhbmRpZGF0ZXMgPSBhd2FpdCBDYW5kaWRhdGVSZXNwb25zZS5maW5kT25lKHtcbiAgICAgICAgICAgIGVtYWlsOiBlbWFpbCxcbiAgICAgICAgICAgIGFzc2Vzc21lbnRJZDogYXNzZXNzbWVudGlkLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGNhbmRpZGF0ZXMuaXNBdHRlbXB0ZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKCdhbHJlYWR5IGF0dGVtcHRlZCcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgcXVlc3Rpb25zX2lkcyA9IGF3YWl0IEFzc2Vzc21lbnQuZmluZE9uZSh7XG4gICAgICAgICAgICAgICAgX2lkOiBhc3Nlc3NtZW50aWQsXG4gICAgICAgICAgICAgICAgYXNzZXNzbWVudHN0YXR1czogJ2xpdmUnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCBxdWVzdGlvbnMgPSBhd2FpdCBRdWVzdGlvbi5maW5kKHtcbiAgICAgICAgICAgICAgICBfaWQ6IHsgJGluOiBxdWVzdGlvbnNfaWRzLnF1ZXN0aW9ucyB9LFxuICAgICAgICAgICAgfSkuc2VsZWN0KHsgcXVlc3Rpb246IDEsICdvcHRpb25zLm9wdGlvbic6IDEsICdvcHRpb25zLl9pZCc6IDEgfSkubGltaXQoMCk7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbihxdWVzdGlvbnMpO1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOyBcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ2Vycm9yIGluIHJldHJldmluZyBxdWVzdGlvbnMgZm9yIHRlc3QnIH0pO1xuICAgIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0geyBzdWJtaXRUZXN0LCBnZXRUZXN0UXVlc3Rpb25zIH07XG5cbiJdLCJtYXBwaW5ncyI6Im00RUFlWTtBQUFBQSxhQUFBLFNBQUFBLENBQUEsU0FBQUMsY0FBQSxXQUFBQSxjQUFBLEVBQUFELGFBQUEsR0FmWixLQUFNLENBQUFFLGlCQUFpQixFQUFBRixhQUFBLEdBQUFHLENBQUEs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